# 02_网络编程

所有网络服务都需要网络编程

* http协议
* 跨域CORS
* bodyparser原理
* 上传原理
* socket io实现实时聊天程序（双向通讯）
* 爬虫（特殊的http通讯的方式）



TCP协议实现实时通讯IM

Socket实现

原理：Net模块提供一个异步API能够创建基于流的TCP服务器，客户端与服务器建立连接后，服务器可以获得一个全双工Socket对象，服务器可以保存Socket对象列表，在接收某客户端消息时，推送给其他客户端。





跨域：`协议http/https、端口、域名host`，任一不同源，像发一个ajax异步请求才会出现这种情况



常用解决方案：

1. JSONP(JSON with Padding)，前端+后端方案，绕过跨域（像黑客）

>  前端构造script标签请求指定URL（由script标签发出的GET请求不受同源策略限制），服务器返回一个函数执行语句，该函数名称通常由查询参callback的值决定，函数的参数为服务器返回的json数据。
>
> 该函数在前端执行后即可获取数据。

2. 代理服务器（将不同源代理成同源的）

> 请求同源服务器，通过该服务器转发请求至目标服务器，得到结果再转发给前端。
>
> 前端开发中测试服务器的代理功能就是采用的该解决方案，但是最终发布上线时如果web应用和接口服务器不在一起仍会跨域。

3. CORS(Cross Origin Resource Share) - 跨域资源共享，后端方案，解决跨域

[预检请求](https://www.jianshu.com/p/b55086cbd9af)

`原理：cors是w3c规范，真正意义上解决跨域问题。它需要服务器对请求进行检查并对响应头做相应处理，从 而允许跨域请求`



## Proxy代理模式

`原来不在同一个域的拉在一起，例如页面和接口不在同一个服务器里面，那么可以再proxy静态服务里，建立一个代理`



反向代理：靠近服务器端，随着访问压力越来越高

正向代理：靠近浏览器端的